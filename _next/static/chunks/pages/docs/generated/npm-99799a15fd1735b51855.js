_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[55],{"0oBi":function(e,a,t){"use strict";var n=t("63Ad");Object.defineProperty(a,"__esModule",{value:!0}),a.isDarkMode=function(){if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return!0;return!1},a.useDarkMode=function(){var e=o.default.useState(!1),a=(0,c.default)(e,2),t=a[0],n=a[1];return(0,r.default)((function(){var e=window.matchMedia("(prefers-color-scheme: dark)"),a=function(){n(window.matchMedia("(prefers-color-scheme: dark)").matches)};return a(),e.addListener(a),function(){e.removeListener(a)}}),[]),t};var c=n(t("nxTg")),o=n(t("mXGw")),r=n(t("YO29"))},"63Ad":function(e,a){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},"6f/q":function(e,a,t){"use strict";var n=t("63Ad");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=n(t("RiSW")),o=n(t("mXGw")),r=n(t("9fEB")),s=t("GDok"),d=t("nZpd"),m=t("AFBu"),l=t("0oBi"),p=function(e){var a=e.children,t=(0,c.default)(e,["children"]),n=o.default.useState(!1);o.default.useEffect((function(){if("undefined"!==typeof document)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)};function e(e){"/"===e.key&&(document.getElementById("search").focus(),e.preventDefault())}}),[]);var p=(0,l.useDarkMode)();return o.default.createElement(d.MobileMenuContext.Provider,{value:t.menuState||n},o.default.createElement(r.default,null,o.default.createElement("link",{rel:"shortcut icon",media:"(prefers-color-scheme:dark)",href:(0,m.formatPath)(p?"favicon-dark.png":"favicon.png")})),o.default.createElement("div",{id:"ignite",className:"min-h-screen flex flex-col dark:bg-gray-1000"},o.default.createElement(s.NavBar,{sections:["docs","blog"],hasHomePage:!0}),a))};a.default=p},AFBu:function(e,a,t){"use strict";var n=t("63Ad");Object.defineProperty(a,"__esModule",{value:!0}),a.formatPath=function(e){return c.default.join("/auto","/".concat(e.replace(/\.mdx$/,"")))},a.postFixHTML=function(e){return e};var c=n(t("R8iU"))},C3pV:function(e,a,t){"use strict";(function(e){var n=t("63Ad");Object.defineProperty(a,"__esModule",{value:!0}),a.Sidebar=a.SidebarActiveItem=void 0;var c=n(t("OvAC")),o=n(t("RiSW")),r=n(t("nxTg")),s=n(t("mXGw")),d=n(t("5dyF")),m=n(t("9fEB")),l=n(t("R8iU")),p=n(t("PDtE")),i=t("/FXl"),u=t("bBV7"),b=t("nZpd"),j=t("AFBu");function O(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function N(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?O(Object(t),!0).forEach((function(a){(0,c.default)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var x=s.default.createContext({pathname:"",sidebarFileLocation:""});a.SidebarActiveItem=x;var h=function(e){var a=e.href,t=e.children,n=s.default.useContext(x),c=(0,i.useMDXComponents)().SidebarLink,o=l.default.join(n.sidebarFileLocation,a),r=a;return n.sidebarFileLocation&&((r=o).endsWith("/index")&&(r=r.replace("/index","")),r.endsWith("/")&&(r=r.slice(0,-1))),s.default.createElement(d.default,{passHref:!0,href:(0,j.postFixHTML)(r)},s.default.createElement(c,{isActive:n.pathname.replace("/index","")===(0,j.formatPath)(r)},t))};a.Sidebar=function(a){var n=a.links,c=a.folder,d=s.default.useContext(b.MobileMenuContext),O=(0,r.default)(d,1)[0],g="/".concat(c),f=function(e){try{return t("f+ue")("./pages"+e+"/_sidebar.mdx").default}catch(a){try{return t("NDOZ")("./pages"+e+"/_sidebar.js").default}catch(a){}}}(g),k=function(a){var t=(0,u.useRouter)(),n="phase-production-build"!==e.env.NEXT_PHASE&&t.pathname.includes("/auto")?l.default.relative("/auto",t.pathname):l.default.relative("/",t.pathname),c=a.find((function(e){return e.__resourcePath.replace(".mdx","")===n}));return c||(c=a.find((function(e){var a=e.__resourcePath.replace(".mdx","");return a.endsWith("index")&&t.pathname.includes(a.replace("/index",""))}))),{title:c.title||"auto",pathname:(0,j.formatPath)(c.__resourcePath)}}(n),y=(0,i.useMDXComponents)(),v=y.SidebarItemWrapper,w=(y.SidebarLink,y.SidebarTitle),C=y.SidebarDivider,E=y.SidebarList,P=y.Sidebar,_=(0,o.default)(y,["SidebarItemWrapper","SidebarLink","SidebarTitle","SidebarDivider","SidebarList","Sidebar"]);return s.default.createElement(x.Provider,{value:N({},k,{sidebarFileLocation:f?g:""})},s.default.createElement(i.MDXProvider,{components:N({},_,{li:v,ul:E,a:h,p:w,hr:C})},s.default.createElement(m.default,null,s.default.createElement("title",null,k.title.replace(/\\`/g,"`"))),s.default.createElement(P,{className:(0,p.default)(!O&&"hidden","lg:block")},f?s.default.createElement(f,null):s.default.createElement(E,null,n.map((function(e){return s.default.createElement(v,{key:e.__resourcePath},s.default.createElement(h,{href:e.__resourcePath},e.title))}))))))}}).call(this,t("5IsQ"))},GDok:function(e,a,t){"use strict";var n=t("63Ad");Object.defineProperty(a,"__esModule",{value:!0}),a.NavBar=void 0;var c=n(t("nxTg")),o=n(t("8VmE")),r=n(t("RiSW")),s=n(t("mXGw")),d=n(t("5dyF")),m=t("V5Fo"),l=t("/FXl"),p=n(t("PDtE")),i=t("nZpd"),u=t("AFBu"),b=function(e){var a=e.className,t=(0,r.default)(e,["className"]);return s.default.createElement("svg",(0,o.default)({className:(0,p.default)("fill-current w-5 h-5",a),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},t),s.default.createElement("path",{d:"M10 0a10 10 0 0 0-3.16 19.49c.5.1.68-.22.68-.48l-.01-1.7c-2.78.6-3.37-1.34-3.37-1.34-.46-1.16-1.11-1.47-1.11-1.47-.9-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.9 1.52 2.34 1.08 2.91.83.1-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.94 0-1.1.39-1.99 1.03-2.69a3.6 3.6 0 0 1 .1-2.64s.84-.27 2.75 1.02a9.58 9.58 0 0 1 5 0c1.91-1.3 2.75-1.02 2.75-1.02.55 1.37.2 2.4.1 2.64.64.7 1.03 1.6 1.03 2.69 0 3.84-2.34 4.68-4.57 4.93.36.31.68.92.68 1.85l-.01 2.75c0 .26.18.58.69.48A10 10 0 0 0 10 0"}))},j=function(){var e=(0,l.useMDXComponents)().SearchInput;return s.default.createElement("div",{className:"relative h-full flex items-center w-full lg:w-auto lg:flex-1 lg:mr-4 px-4"},s.default.createElement(e,null))};a.NavBar=function(e){var a=e.sections,t=e.hasHomePage,n=s.default.useContext(i.MobileMenuContext),o=(0,c.default)(n,2),r=o[0],p=o[1],O=(0,l.useMDXComponents)(),N=O.Logo,x=O.NavBarWrapper,h=O.NavBar,g=O.NavBarItem,f=O.MobileMenuButton;return s.default.createElement(s.default.Fragment,null,s.default.createElement(x,null,s.default.createElement(h,null,t?s.default.createElement(d.default,{passHref:!0,href:"/"},s.default.createElement(N,null)):s.default.createElement(N,null),s.default.createElement("div",{className:"w-full h-full flex items-center lg:flex flex-1 lg:max-w-screen-md lg:mx-auto"},s.default.createElement(j,null),s.default.createElement(f,{open:r,setOpen:p,className:"lg:hidden"}),s.default.createElement("div",{className:"hidden lg:flex h-full"},a.map((function(e){return s.default.createElement(d.default,{passHref:!0,key:e,href:(0,u.postFixHTML)("/".concat(e))},s.default.createElement(g,null,(0,m.titleCase)(e)))})),s.default.createElement(g,{href:"https://github.com/intuit/auto",target:"_blank","aria-label":"Open on GitHub"},s.default.createElement(b,null)))))),r&&s.default.createElement("div",{className:"lg:hidden"},a.map((function(e){return s.default.createElement(d.default,{passHref:!0,key:e,href:(0,u.postFixHTML)("/".concat(e))},s.default.createElement(g,null,(0,m.titleCase)(e)))})),s.default.createElement(g,{href:"https://github.com/intuit/auto",target:"_blank"},s.default.createElement(b,{className:"mr-2"}),"Open on GitHub")))}},QsVT:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return l})),t.d(a,"default",(function(){return u}));var n=t("Fcif"),c=t("dV/x"),o=t("mXGw"),r=t.n(o),s=t("/FXl"),d=t("pu0P"),m=t.n(d),l=(r.a.createElement,{title:"NPM Plugin",layout:"docs",date:null,author:"",email:"",__resourcePath:"docs/generated/npm.mdx",__scans:{}}),p={frontMatter:l},i=m.a;function u(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(s.mdx)(i,Object(n.a)({},p,t,{components:a,mdxType:"MDXLayout"}),Object(s.mdx)("p",null,"Publish to NPM.\nWorks in both a monorepo setting and for a single package.\nThis plugin is loaded by default when ",Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," is installed through ",Object(s.mdx)("inlineCode",{parentName:"p"},"npm"),".\nIf you configure ",Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," to use any other plugin this will be lost.\nSo you must add the ",Object(s.mdx)("inlineCode",{parentName:"p"},"npm")," plugin to your plugins array if you still want NPM functionality."),Object(s.mdx)("h2",{id:"prerequisites"},Object(s.mdx)("a",Object(n.a)({parentName:"h2"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#prerequisites"}),"Prerequisites")),Object(s.mdx)("p",null,"To publish to npm you will need an ",Object(s.mdx)("inlineCode",{parentName:"p"},"NPM_TOKEN")," set in your environment."),Object(s.mdx)("blockquote",null,Object(s.mdx)("p",{parentName:"blockquote"},"Warning! Avoid using the ",Object(s.mdx)("inlineCode",{parentName:"p"},"prepublishOnly")," script as it can lead to errors. ",Object(s.mdx)("a",Object(n.a)({parentName:"p"},{href:"https://intuit.github.io/auto/docs/welcome/quick-merge#beware-long-publishes"}),"Read more here."))),Object(s.mdx)("h2",{id:"installation"},Object(s.mdx)("a",Object(n.a)({parentName:"h2"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#installation"}),"Installation")),Object(s.mdx)("p",null,"This plugin is included with the ",Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," CLI so you do not have to install it. To install if you are using the ",Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," API directly:"),Object(s.mdx)("pre",{className:"language-bash"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"npm")," i --save-dev @auto-it/npm\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"# or"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"yarn")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token function"}),"add")," -D @auto-it/npm\n")),Object(s.mdx)("blockquote",null,Object(s.mdx)("p",{parentName:"blockquote"},'WARNING: You can only use one "package manager" at a time!\nMixing them will lead to undesired results.')),Object(s.mdx)("h2",{id:"usage"},Object(s.mdx)("a",Object(n.a)({parentName:"h2"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#usage"}),"Usage")),Object(s.mdx)("pre",{className:"language-json"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"plugins"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"npm"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// or with options"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"npm"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"forcePublish"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"// other plugins"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.mdx)("blockquote",null,Object(s.mdx)("p",{parentName:"blockquote"},"If you're using the ",Object(s.mdx)("inlineCode",{parentName:"p"},"noVersionPrefix")," option you will also need to add ",Object(s.mdx)("inlineCode",{parentName:"p"},'tag-version-prefix=""')," to your ",Object(s.mdx)("inlineCode",{parentName:"p"},".npmrc"),".\nOtherwise when npm versions your code the tag it creates will have the ",Object(s.mdx)("inlineCode",{parentName:"p"},"v")," and ",Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," will get confused.")),Object(s.mdx)("h2",{id:"monorepo-usage"},Object(s.mdx)("a",Object(n.a)({parentName:"h2"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#monorepo-usage"}),"Monorepo Usage")),Object(s.mdx)("p",null,"The ",Object(s.mdx)("inlineCode",{parentName:"p"},"npm")," plugin works out of the box with ",Object(s.mdx)("inlineCode",{parentName:"p"},"lerna")," in both ",Object(s.mdx)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/lerna/lerna#independent-mode"}),Object(s.mdx)("inlineCode",{parentName:"a"},"independent"))," and ",Object(s.mdx)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/lerna/lerna#fixedlocked-mode-default"}),Object(s.mdx)("inlineCode",{parentName:"a"},"fixed"))," mode.\n",Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," works on a repo basis and should be run from the root of the repo, not on each sub-package.\nNo additional setup is required."),Object(s.mdx)("blockquote",null,Object(s.mdx)("p",{parentName:"blockquote"},"Do you have a package in your monorepo you don't want to publish but still want versioned?\nJust set that ",Object(s.mdx)("inlineCode",{parentName:"p"},'"private": true')," you that package's ",Object(s.mdx)("inlineCode",{parentName:"p"},"package.json"),"!")),Object(s.mdx)("h2",{id:"options"},Object(s.mdx)("a",Object(n.a)({parentName:"h2"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#options"}),"Options")),Object(s.mdx)("h3",{id:"setrctoken"},Object(s.mdx)("a",Object(n.a)({parentName:"h3"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#setrctoken"}),"setRcToken")),Object(s.mdx)("p",null,"When running the ",Object(s.mdx)("inlineCode",{parentName:"p"},"shipit")," command auto will try to set your ",Object(s.mdx)("inlineCode",{parentName:"p"},".npmrc")," token while publishing. To disable this feature you must set the ",Object(s.mdx)("inlineCode",{parentName:"p"},"setRcToken")," to false."),Object(s.mdx)("pre",{className:"language-json"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"plugins"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"npm"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"setRcToken"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.mdx)("h3",{id:"forcepublish"},Object(s.mdx)("a",Object(n.a)({parentName:"h3"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#forcepublish"}),"forcePublish")),Object(s.mdx)("p",null,"By default ",Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," will force publish all packages for monorepos. To disable this behavior you must set the ",Object(s.mdx)("inlineCode",{parentName:"p"},"forcePublish")," to false."),Object(s.mdx)("pre",{className:"language-json"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"plugins"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"npm"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"forcePublish"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.mdx)("h3",{id:"exact"},Object(s.mdx)("a",Object(n.a)({parentName:"h3"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#exact"}),"exact")),Object(s.mdx)("p",null,"To force all packages publish with ",Object(s.mdx)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/lerna/lerna/blob/master/commands/version/README.md#--exact"}),"exact versions"),"."),Object(s.mdx)("pre",{className:"language-json"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"plugins"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"npm"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"exact"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.mdx)("h3",{id:"subpackagechangelogs"},Object(s.mdx)("a",Object(n.a)({parentName:"h3"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#subpackagechangelogs"}),"subPackageChangelogs")),Object(s.mdx)("p",null,Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," will create a changelog for each sub-package in a monorepo.\nYou can disable this behavior by using the ",Object(s.mdx)("inlineCode",{parentName:"p"},"subPackageChangelogs")," option."),Object(s.mdx)("pre",{className:"language-json"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"plugins"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"npm"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"subPackageChangelogs"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.mdx)("h3",{id:"monorepochangelog"},Object(s.mdx)("a",Object(n.a)({parentName:"h3"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#monorepochangelog"}),"monorepoChangelog")),Object(s.mdx)("p",null,Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," will group changelog lines by sub-packages in a monorepo.\nYou can disable this behavior by using the ",Object(s.mdx)("inlineCode",{parentName:"p"},"monorepoChangelog")," option."),Object(s.mdx)("pre",{className:"language-json"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"plugins"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"npm"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"monorepoChangelog"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.mdx)("h3",{id:"legacyauth"},Object(s.mdx)("a",Object(n.a)({parentName:"h3"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#legacyauth"}),"legacyAuth")),Object(s.mdx)("p",null,"When publishing packages that require authentication but you are working with an internally hosted npm registry that only uses the legacy Base64 version of username:password.\nThis is the same as the NPM publish ","_","auth flag."),Object(s.mdx)("p",null,"For security this option only accepts a boolean.\nWhen this option is set true ",Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," will pass ",Object(s.mdx)("inlineCode",{parentName:"p"},"--_auth $NPM_TOKEN")," to the publish command.\nSet ",Object(s.mdx)("inlineCode",{parentName:"p"},"$NPM_TOKEN"),' to the "Base64 version of username:password".'),Object(s.mdx)("pre",{className:"language-json"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"plugins"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"npm"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"legacyAuth"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.mdx)("h3",{id:"canaryscope"},Object(s.mdx)("a",Object(n.a)({parentName:"h3"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#canaryscope"}),"canaryScope")),Object(s.mdx)("p",null,"Publishing canary versions comes with some security risks.\nIf your project is private you have nothing to worry about and can skip these, but if your project is open source there are some security holes."),Object(s.mdx)("blockquote",null,Object(s.mdx)("p",{parentName:"blockquote"},"\u26a0\ufe0f This feature works pretty easily/well for single packages. In a monorepo we have to deal with a lot more, and this options should be treated as experimental.")),Object(s.mdx)("h4",{id:"setup"},Object(s.mdx)("a",Object(n.a)({parentName:"h4"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#setup"}),"Setup")),Object(s.mdx)("ol",null,Object(s.mdx)("li",{parentName:"ol"},"Create a test scope that you publish canaries under (ex: ",Object(s.mdx)("inlineCode",{parentName:"li"},"@auto-canary")," or ",Object(s.mdx)("inlineCode",{parentName:"li"},"@auto-test"),")"),Object(s.mdx)("li",{parentName:"ol"},"Create a user that only has access to that scope"),Object(s.mdx)("li",{parentName:"ol"},"Set the default ",Object(s.mdx)("inlineCode",{parentName:"li"},"NPM_TOKEN")," to a token that can publish to that scope (this is used for any pull request)"),Object(s.mdx)("li",{parentName:"ol"},"Set up a ",Object(s.mdx)("inlineCode",{parentName:"li"},"secure")," token that is only accessible on the main fork (still named ",Object(s.mdx)("inlineCode",{parentName:"li"},"NPM_TOKEN"),")"),Object(s.mdx)("li",{parentName:"ol"},"Set up alias (only monorepos)")),Object(s.mdx)("p",null,"Step 3 might not be possible on your build platform."),Object(s.mdx)("p",null,"The following are the ways the ",Object(s.mdx)("inlineCode",{parentName:"p"},"auto")," team knows how to do it.\nIf you do not see the method for you build platform, please make a pull request!"),Object(s.mdx)("p",null,Object(s.mdx)("strong",{parentName:"p"},"Platform Solutions:")),Object(s.mdx)("ul",null,Object(s.mdx)("li",{parentName:"ul"},Object(s.mdx)("a",Object(n.a)({parentName:"li"},{href:"https://circleci.com/docs/2.0/contexts/"}),"CircleCI Context")," - Contexts provide a mechanism for securing and sharing environment variables across projects. The environment variables are defined as name/value pairs and are injected at runtime.")),Object(s.mdx)("pre",{className:"language-json"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"plugins"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"npm"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"canaryScope"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"@auto-canary"'),"\n      ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.mdx)("h5",{id:"set-up-alias"},Object(s.mdx)("a",Object(n.a)({parentName:"h5"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#set-up-alias"}),"Set up alias")),Object(s.mdx)("p",null,"If you are managing a non-monorepo you do not have to do anything for this step!\nIf you manage a monorepo we still have to do handle our packages importing each other.\nSince we just changed the name of the package all imports to our packages are now broken!"),Object(s.mdx)("p",null,"There are multiple ways to make this work and the solution might be different depending on your build target."),Object(s.mdx)("ul",null,Object(s.mdx)("li",{parentName:"ul"},Object(s.mdx)("a",Object(n.a)({parentName:"li"},{href:"https://www.npmjs.com/package/module-alias"}),"module-alias")," - Modifiy node's require for your canary deploys (This is what ",Object(s.mdx)("inlineCode",{parentName:"li"},"auto")," uses). Useful for node packages"),Object(s.mdx)("li",{parentName:"ul"},Object(s.mdx)("a",Object(n.a)({parentName:"li"},{href:"https://webpack.js.org/configuration/resolve/"}),"Webpack Aliases")," Modify scoped requires for webpack based projects."),Object(s.mdx)("li",{parentName:"ul"},Object(s.mdx)("a",Object(n.a)({parentName:"li"},{href:"https://www.npmjs.com/package/babel-plugin-module-resolver"}),"babel-plugin-module-resolver")," - A Babel plugin to add a new resolver for your modules when compiling your code using Babel.")),Object(s.mdx)("h2",{id:"troubleshooting"},Object(s.mdx)("a",Object(n.a)({parentName:"h2"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#troubleshooting"}),"Troubleshooting")),Object(s.mdx)("h2",{id:"npm-err-need-auth-auth-required-for-publishing"},Object(s.mdx)("a",Object(n.a)({parentName:"h2"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#npm-err-need-auth-auth-required-for-publishing"}),"npm ERR! need auth auth required for publishing")),Object(s.mdx)("p",null,"This error will occur when you do not have a ",Object(s.mdx)("inlineCode",{parentName:"p"},"NPM_TOKEN")," set."),Object(s.mdx)("h3",{id:"still-getting-errors"},Object(s.mdx)("a",Object(n.a)({parentName:"h3"},{className:'header-link no-underline text-gray-900" hover:underline',href:"#still-getting-errors"}),"Still getting errors?!")),Object(s.mdx)("p",null,"Make sure that ",Object(s.mdx)("inlineCode",{parentName:"p"},"npm")," is trying to publish to the correct registry. Force ",Object(s.mdx)("inlineCode",{parentName:"p"},"npm"),"/",Object(s.mdx)("inlineCode",{parentName:"p"},"lerna")," to use the public registry by adding the following to your package.json:"),Object(s.mdx)("pre",{className:"language-json"},Object(s.mdx)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"publishConfig"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"registry"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"https://registry.npmjs.org/"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"access"'),Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"public"'),"\n  ",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.mdx)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")))}u.isMDXComponent=!0},nZpd:function(e,a,t){"use strict";var n=t("63Ad");Object.defineProperty(a,"__esModule",{value:!0}),a.MobileMenuContext=void 0;var c=n(t("mXGw")).default.createContext([!1,function(){}]);a.MobileMenuContext=c},pu0P:function(e,a,t){"use strict";var n=t("63Ad");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=n(t("nxTg")),o=n(t("mXGw")),r=n(t("R8iU")),s=t("/FXl"),d=n(t("PDtE")),m=t("C3pV"),l=n(t("6f/q")),p=n(t("x3GE")),i=/([^`]*)`([^`]*)`(.*)/m;var u=function(e){var a=e.children,t=e.frontMatter,n=o.default.useState(!1),u=(0,c.default)(n,2),b=u[0],j=u[1],O=(0,s.useMDXComponents)(),N=t.__resourcePath.split("/")[0],x=(0,p.default)(),h=["index.mdx","blog/both-worlds.mdx","blog/npm-canary-scope.mdx","blog/pr-in-progress.mdx","blog/using-shipit.mdx","blog/v8.mdx","blog/why.mdx","docs/_sidebar.mdx","docs/index.mdx","docs/build-platforms/circleci.mdx","docs/build-platforms/github-actions.mdx","docs/build-platforms/jenkins.mdx","docs/build-platforms/travis.mdx","docs/configuration/autorc.mdx","docs/configuration/non-npm.mdx","docs/configuration/plugins.mdx","docs/configuration/troubleshooting.mdx","docs/generated/all-contributors.mdx","docs/generated/brew.mdx","docs/generated/canary.mdx","docs/generated/changelog.mdx","docs/generated/chrome.mdx","docs/generated/cocoapods.mdx","docs/generated/comment.mdx","docs/generated/conventional-commits.mdx","docs/generated/crates.mdx","docs/generated/create-labels.mdx","docs/generated/docker.mdx","docs/generated/exec.mdx","docs/generated/first-time-contributor.mdx","docs/generated/gem.mdx","docs/generated/gh-pages.mdx","docs/generated/git-tag.mdx","docs/generated/gradle.mdx","docs/generated/info.mdx","docs/generated/init.mdx","docs/generated/jira.mdx","docs/generated/label.mdx","docs/generated/latest.mdx","docs/generated/maven.mdx","docs/generated/next.mdx","docs/generated/npm.mdx","docs/generated/omit-commits.mdx","docs/generated/omit-release-notes.mdx","docs/generated/pr-body-labels.mdx","docs/generated/pr-body.mdx","docs/generated/pr-check.mdx","docs/generated/pr-status.mdx","docs/generated/release.mdx","docs/generated/released.mdx","docs/generated/s3.mdx","docs/generated/shipit.mdx","docs/generated/slack.mdx","docs/generated/twitter.mdx","docs/generated/upload-assets.mdx","docs/generated/version.mdx","docs/plugins/changelog-hooks.mdx","docs/plugins/configuration-hooks.mdx","docs/plugins/hook-api-docs.mdx","docs/plugins/init-hooks.mdx","docs/plugins/log-parse-hooks.mdx","docs/plugins/release-lifecycle-hooks.mdx","docs/plugins/writing-plugins.mdx","docs/plugins/writing-publishing-plugins.mdx","docs/welcome/getting-started.mdx","docs/welcome/quick-merge.mdx"].map((function(e){return r.default.relative("./",e)})).filter((function(e){return e.startsWith(N)})).map((function(e){return x.find((function(a){return a.__resourcePath===e}))}));return o.default.createElement(l.default,{menuState:[b,j]},o.default.createElement("div",{className:"flex flex-1 w-full max-w-screen-sm lg:max-w-screen-xl mx-auto"},o.default.createElement(m.Sidebar,{links:h,folder:N}),o.default.createElement("main",{className:(0,d.default)("DocSearch-content","pt-8 pb-32 px-4 lg:mx-auto max-w-full md:max-w-screen-sm lg:max-w-screen-md","flex-1","lg:block",b&&"hidden")},o.default.createElement(O.h1,null,function(e,a){if(a){for(var t=[],n=a.replace(/\\`/g,"`");i.test(n);){var r=n.match(i),s=(0,c.default)(r,4),d=s[1],m=s[2],l=s[3];t.push(d),t.push(o.default.createElement(e.inlineCode,null,m)),n=l}return t.push(n),o.default.createElement("div",null,t)}}(O,t.title)),a)))};a.default=u},x3GE:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=t("jmz1");a.default=function(){try{return n.keys().map(n)}catch(e){return[]}}},xBor:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/generated/npm",function(){return t("QsVT")}])}},[["xBor",0,1,2,3,4]]]);